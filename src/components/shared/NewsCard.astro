---
import ButtonElevated from "./ButtonElevated.astro";
import SanityImage from "./SanityImage.astro";
import type { CustomImage } from "../../../sanity.types";
import type { SanityImageSource } from '@sanity/image-url/lib/types/types';

interface Props {
  image: CustomImage;
  title: string;
  desc: string;
  slug: string;
}

const { image, title, desc, slug } = Astro.props;
---

<div class="news-card">

  <div class="img-wrapper">
    <SanityImage
      image={image}
      alt={image.alt}
      widths={[320, 640, 960]}
      sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
      quality={85}
      loading="lazy"
      class="news-image"
    />
  </div>
  <div class="text-wrapper">
    <h3>{title}</h3>
    <p>{desc}</p>
    <ButtonElevated text="Zobacz wiÄ™cej" href={`/projekty/${slug}`}/>
  </div>
</div>

<style>
  .news-card {
    display: flex;
    flex-direction: column;
    flex: 1;
    border-radius: 1rem;
    background-color: #ffffff;
    overflow: hidden;
  }
  .text-wrapper {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
    padding: 2rem;
    height: 100%;
  }
  .text-wrapper p {
    margin-bottom: auto;
  }
  .img-wrapper {
    width: 100%;
    height: 100%;
    aspect-ratio: 16/9;
  }
  .img-wrapper :global(.news-image) {
    width: 100%;
    height: 100%;
    aspect-ratio: 16/9;
  }
  /* Large screens (1200px and below) */
  @media only screen and (max-width: 1200px) {

    .text-wrapper {
      gap: 1rem;
      padding: 1rem;
    }
  }
  /* Medium screens (768px and below) */
  @media only screen and (max-width: 768px) {
    .img-wrapper {
    width: auto;
    height: 100%;
    aspect-ratio: 16/9;
  }
  .img-wrapper :global(.news-image) {
    width: auto;
    height: 100%;
    aspect-ratio: 16/9;
  }
  }
  .text-wrapper {
    padding: 2rem;
  }
  .text-wrapper p {
    padding-bottom: 1rem;
  }
  /* Small screens (485px and below) */
  @media only screen and (max-width: 485px) {
    .text-wrapper {
    padding: 1.5rem;
  }
  }
  /* Tiny screens (350px and below) */
  @media only screen and (max-width: 350px) {

  }
</style>